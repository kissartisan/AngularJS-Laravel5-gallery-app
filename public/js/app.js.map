{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["// This is the main file where angular is defined\r\nvar myApp = angular.module('myApp', ['ngRoute', 'ngCookies']);\r\n\r\nmyApp.config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {\r\n\t$routeProvider.when('/', {\r\n\t\t\ttemplateUrl: 'templates/users/login.html',\r\n\t\t\tcontroller: 'userController',\r\n\t\t});\r\n\r\n\t$routeProvider.when('/dashboard', {\r\n\t\ttemplateUrl: 'templates/users/dashboard.html',\r\n\t\tcontroller: 'userController',\r\n\t\tauthenticated: true\r\n\t});\r\n\t$routeProvider.when('/gallery/view', {\r\n\t\ttemplateUrl: 'templates/gallery/gallery-view.html',\r\n\t\tcontroller: 'userController',\r\n\t\tauthenticated: true\r\n\t});\r\n\t$routeProvider.when('/gallery/add', {\r\n\t\ttemplateUrl: 'templates/gallery/gallery-add.html',\r\n\t\tcontroller: 'galleryController',\r\n\t\tauthenticated: true\r\n\t});\r\n\t$routeProvider.when('/logout', {\r\n\t\ttemplateUrl: 'templates/users/logout.html',\r\n\t\tcontroller: 'galleryController',\r\n\t\tauthenticated: true\r\n\t});\r\n\t$routeProvider.otherwise('/');\r\n}]);\r\n\r\nmyApp.run(['$rootScope', '$location', 'userModel', function($rootScope, $location, userModel) {\r\n\t$rootScope.$on(\"$routeChangeStart\", function(event, next, current) {\r\n\t\tif (next.$$route.authenticated) {\r\n\t\t\t// If the user is not authenticated\r\n\t\t\tif (!userModel.getAuthStatus()) {\r\n\t\t\t\tconsole.log('Not authenticated');\r\n\t\t\t\t$location.path('/'); // Redirect to home\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Get back the user on the dashboard if it is logged in already\r\n\t\tif (next.$$route.originalPath == '/') {\r\n\t\t\t// console.log('Login page');\r\n\t\t\tif (userModel.getAuthStatus()) {\r\n\t\t\t\t$location.path(current.$$route.originalPath);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}]);"],"sourceRoot":"/source/"}